<!doctype linuxdoc system>

<article>

<title>Tietokoneohjelmoinnista usein esitettyjä kysymyksiä vastauksineen
<author>Antti-Juhani Kaijanaho, <tt/gaia@iki.fi/
<date>$Id: sao-faq.sgml,v 1.8 1998/10/17 23:19:00 antkaij Exp $

<abstract>
<bf/FAQin kokoaja ei vastaa vastausten oikeellisuudesta./
</abstract>

<toc>

<sect>Yleistä
<p>
<sect1>FAQin tekijänoikeudet
<p>
Copyright &copy; 1997, 1998 Antti-Juhani Kaijanaho.  Tätä kirjoitelmaa
saadaan levittää ja muuttaa vapaasti, sillä ehdolla, että muutosten
tekijä ja päiväys ilmoitetaan muutetuissa versioissa selkeästi.

Toivon, että kaikissa viittauksissa tähän artikkeliin mainitaan sen
<url url="http://www.iki.fi/gaia/faq/sao-faq.html" name="ikiosoite">.
Viittauksissa ei tule käyttää muita osoitteita, sillä vain mainitun
osoitteen toimiminen taataan.

<sect1>Olemisen tarkoitus
<p>
Tämän dokumentin on tarkoitus vastata sellaisiin keskusteluryhmissä
<htmlurl url="news:sfnet.atk.ohjelmointi" name=sfnet.atk.ohjelmointi> ja
<htmlurl url="news:sfnet.atk.ohjelmointi.alkeet" name=sfnet.atk.ohjelmointi.alkeet>
usein esitettyihin kysymyksiin, joihin ei ole järkevää vastata &ndash;
tai joihin ei ole vielä vastattu &ndash; kansainvälisissä
FAQ:eissa. Tämä tarkoittaa sitä, että tämä FAQ ei juurikaan käsittele
esimerkiksi ohjelmointikieliä eikä numeerisia menetelmiä.  Tässä
artikkelissa käsitellään myös hieman ryhmässä noudatettavia
käyttäytymissääntöjä.

Edellä esitettyjen rajausten vuoksi tämä FAQ käsittelee lähinnä
sellaisia algoritmeja, joiden käyttöönoton taustalla on hallinnollinen
tai poliittinen päätös.

<sect1>Mistä tämän FAQin saa?
<p>
Yleensä tähän kysymykseen vastataan: ''Luet sitä nyt juuri, joten
<em/säilytä/ hallussasi oleva kappale.''

Uusin versio on aina löydettävissä FAQin <url
url="http://www.iki.fi/gaia/faq/sao-faq.html" name="seittisivulta">.

Tämä dokumentti on olemassa myös tekstiversiona (<url
url="http://www.iki.fi/gaia/faq/sao-faq.txt" name="ilman korostuksia">
ja <url url="http://www.iki.fi/gaia/faq/sao-faq.text"
name="korostuksineen">).

Myös FAQin <url url="http://www.iki.fi/gaia/faq/sao-faq.sgml"
name="SGML-sorsat"> ovat saatavilla.

Kaikissa ylläolevissa osoitteissa on aina FAQin uusin julkaistu versio.

Tämä FAQ pyritään postaamaan joka kuukauden 17. päivänä uutisryhmiin
<htmlurl url="news:sfnet.atk.ohjelmointi"
name="sfnet.atk.ohjelmointi"> ja <htmlurl
url="news:sfnet.atk.ohjelmointi.alkeet"
name="sfnet.atk.ohjelmointi.alkeet">.

<sect>Missä ja mitä voin kysyä?
<p>
Ennenkuin kysyt, tarkista, onko kysymykseesi vastattu tässä
kirjoitelmassa.

Uutisryhmä <htmlurl url="news:sfnet.atk.ohjelmointi"
name="sfnet.atk.ohjelmointi"> on tarkoitettu tietokoneen ohjelmoinnin
yhteydessä esiin nousseiden aiheiden käsittelyyn.  Virallisen
kuvauksen mukaan ryhmään sopii ''kaikenlainen ohjelmointiin vaan ei
valmiiden ohjelmien käyttöön liittyvä keskustelu: algoritmit,
ohjelmointikielet, työkalut, ohjelmien suunnittelu, määrittely,
testaus&nbsp;jne.''

Keväällä&nbsp;1998 perustettiin uutisryhmä <htmlurl
url="news:sfnet.atk.ohjelmointi.alkeet"
name="sfnet.atk.ohjelmointi.alkeet">.  Ryhmän virallinen kuvaus
kertoo, että se ''on tarkoitettu ohjelmointia aloitteleville tai
sellaisille, jotka tutustuvat itselleen uuteen ohjelmoinnin
osa-alueeseen''.  Hyvä nyrkkisääntö on, että jos jotain kysymystä
käsitellään hyvin osa-alueen perusoppikirjoissa, se kuuluu
alkeet-ryhmään.

<em/HTML-kieleen liittyvät kysymykset eivät kuulu kumpaankaan
ohjelmointiryhmään,/ sillä HTML ei ole ohjelmointikieli.  Esitä ne
mielummin WWW-kysymyksille varatussa ryhmässä <htmlurl
url="news:sfnet.viestinta.www" name="sfnet.viestinta.www">, kun olet
ensin tarkistanut, ettei kysymykseesi ole vastattu englanninkielisessä
<url url="http://www.stack.nl/htmlhelp/faq/wdgfaq.htm"
name="FAQ:ssa">.

<sect>Numerosarjoja ja niiden tarkistemerkkejä
<p>
Numerosarjojen tarkisteista on olemassa tätä FAQqia kattavampi esitys.
Sen on kirjoittanut Teppo Vuori.  Kirjoitelma on tekijänsä luvalla
julkaistu <url name="tämän FAQin oheistekstinä WWW:ssä"
url="http://www.iki.fi/gaia/faq/tarkmerk.html">.

<sect1>Miten pankkiviitenumero muodostetaan?
<p>
Pankkiviitenumero on vähintään neljä ja korkeintaan 20 merkkiä pitkä
numerosarja. Sen tulisi kuitenkin olla mahdollisimman lyhyt, jotta
näppäilyvirheet vähenisivät. Laskuttaja voi valita viitenumeron
vapaasti viimeistä numeroa lukuunottamatta. Viitenumero suositellaan
tulostettavaksi viiden numeron ryhmissä oikealta alkaen. Alkunollia ei
tulosteta.

Viitenumeron viimeinen numero on tarkiste. Se muodostetaan
seuraavasti:

<itemize>
<item>Tarkistettavan viitteen numerot tarkistetta lukuunottamatta
kerrotaan oikealta vasemmalle painoarvoilla 7, 3, 1, 7, 3, 1, ...
<item>Tulot lasketaan yhteen ja summa vähennetään seuraavasta täydestä
kymmenestä.
<item>Erotus on viitenumeron tarkiste.
</itemize>

Esimerkiksi 123 45672 on oikein muodostettu viitenumero.

Lähde: <em/Tilisiirto-opas 11.1.1993/ (Suomen pankkiyhdistys).

Kimmo Surakka (<tt/kusti@cs.tut.fi/) on kirjoittanut tästä aiheesta
<url url="http://www.cs.tut.fi/~kusti/viite.html" name="seittisivun">,
josta löytyy mm. C-kielinen esimerkkifunktio.

<sect1>Miten henkilötunnus muodostetaan?
<p>
Suomalainen henkilötunnus (aiemmin sosiaaliturvatunnus) koostuu
syntymäajasta, vuosisatamerkistä, tunnusluvusta ja
tarkistemerkistä. Niinpä se on muotoa PPKKVVCNNNT.  Kaikki nollat
tulostetaan.

Vuosisatamerkki (C) on ''-'' 1900-luvulla ja ''+'' 1800-luvulla
syntyneillä. 2000-luvulla syntyneiden henkilötunnuksissa käytetään
isoa A-kirjainta. <em/Huomaa, että henkilötunnuksessa ei ole
automaattisesti viivaa välissä/; kaikki ohjelmat, jotka olettavat
henkilötunnuksen olevan muotoa 111111-1111, hajoavat 2000-luvulla.

Tunnusluku (NNN) on kolminumeroinen luku, joka on miehillä pariton ja
naisilla parillinen. Se on yleensä pieni luku.

Tarkistemerkki (T) lasketaan siten, että syntymäaika ja tunnusluku
yhdistetään yhdeksi 9-merkkiseksi luvuksi, joka on siis muotoa
PPKKVVNNN.  Tämä luku jaetaan 31:llä. Jakojäännöksen perusteella
valitaan tarkistemerkiksi yksi merkeistä
0123456789ABCDEFHJKLMNPRSTUVWXY siten, että jaon mennessä tasan
tarkistemerkki on 0, jakojäännöksen ollessa yksi se on 1 jne. Jos siis
jakojäännös on 30, on tarkistemerkkinä kirjain Y.

<sect1>Miten LY-tunnus muodostetaan?
<p>
Vastaus on pääosin Sami J. Laineen <tt/&lt;no.spam.lane@iki.fi&gt;/
käsialaa.

Liike- ja yhteisötunnuksen muodostavat järjestysnumero ja
tarkistusnumero. Järjestysnumero on alussa ja se on enintään
seitsämännumeroinen.

Tarkistusnumeron laskemiseksi kerrotaan oikealta vasemmalle lukien
järjestysnumeron

<itemize>
<item>ensimmäinen numero luvulla 2,
<item>toinen numero luvulla 4,
<item>kolmas numero luvulla 8,
<item>neljäs numero luvulla 5,
<item>viides numero luvulla 10,
<item>kuudes numero luvulla 9,
<item>seitsemäs numero luvlla 7
</itemize>

sekä lasketaan näin saadut tulos yhteen ja jaetaan summa
luvulla&nbsp;11. Tarkistussnumero määräytyy jakolaskun jakojäännöksen
perusteella seuraavasti: jos jakojäännös on nolla, on tarkistusnumero
nolla. Jos jakojäännös on suurempi kuin yksi, on tarkistusnumero
erotus, joka saadaan vähentämällä jakojäännös luvusta 11. Jos
jakojäännös on yksi, jätetään tarkistusnumeroa vastaava
järjestysnumero käyttämättä.

Erikoistapausta, jossa jakojäännös on yksi, selvittänee esimerkki.
Kuvitteellisen Oy Yritys Ab:n LY-tunnus on 1111111-3. Koska
jakojäännös on 1, järjestysnumerosta pudotetaan kolmas ykkönen pois;
Oy Yritys Ab:n todellinen järjestysnumero on siis 111111.

<sect>Päiväykseen liittyviä algoritmeja
<p>
<sect1>Yleistä ja pari kalenterikirjastoa
<p>
Vaikka monet päiväykseen liittyistä algoritmeista ovatkin
kansainvälisiä, käsittelen osaa niistä tässä. Koska Suomi ja
Yhdysvallat laskevat kalenterinsa hieman eri tavoin, emme voi odottaa,
että pääasiassa yhdysvaltalaiset faqinkokoajat osaisivat vastata
suomalaisten kannalta oikein.

Itse asiassa huomasin etsiessäni tähän dokumenttiin vastauksia, että
osaa päiväysalgoritmeista ei ole oikeastaan ollenkaan käsitelty
kansainvälisissä FAQ:eissa. Niissäkin, joissa näitä harvoin
käsiteltyjä kysymyksiä on käsitelty, on kokoaja sanonut, että hänellä
ei ole hajuakaan, onko hänen antamansa vastaus oikea.

Riku Meskanen (<tt/mesrik@cc.jyu.fi/) on kirjoittanut C-kielisen
kalenterikirjaston. Kirjasto on GPL:n alainen ja on saatavissa <url
url="ftp://ftp.jyu.fi/private/mesrik/" name="FTP:llä"> sekä
<tt/tar.gz/- että <tt/zip/-tiedostona.

Steffen Beyer (<tt/sb@sdm.de/) on kirjoittanut Perl-modulin
<tt/Date::DateCalc/, joka sisältää yksinkertaisia päiväykseen liittyviä
ruutiineja. Minulla ei ole kokemuksia sen toimivuudesta. Modulin voi
hakea CPAN-mirroreista esimerkiksi hakemistosta
<tt>modules/by-module/Date</tt>.

<sect1>Miten määritän annetun päivän viikkonumeron?
<p>
Tähän kysymykseen annetaan huomattavasti enemmän vääriä kuin oikeita
vastauksia. Seuraava on yritetty varmistaa oikeaksi, mutta takuita en
anna.

Toisin kuin esimerkiksi Yhdysvallat, Suomi numeroi viikkonsa
kansaivälisen ISO 8061 -standardin mukaisesti. Standardi otettiin
käyttöön Suomessa vuonna 1973. Sen mukaan:

<itemize>
<item>viikon ensimmäinen päivä on maanantai; ja
<item>vuoden ensimmäinen viikko (viikko 1) on se viikko, johon kuuluu
vuoden ensimmäinen torstai.
</itemize>

Tästä seuraa muutama viikkonumeron laskemista vaikeuttava asia. Kaksi
tärkeintä lienevät se, että tammikuun 1. päivä ei välttämättä kuulu
vuoden ensimmäiseen viikkoon, ja se, että vuodessa on &ndash; vuodesta
riippuen &ndash; joko 52 tai 53 viikkoa.

<url url="http://www.pip.dknet.dk/~pip10160/calendar.html"
name="Calendar FAQ:in"> (osa 3, kysymys 5.6) mukaan 53 viikkoa on
kaikissa vuosissa, jotka alkavat torstaina, sekä lisäksi
karkausvuosissa, jotka alkavat keskiviikkona. Muissa on 52 viikkoa.

Niinpä kohtuullisen yksinkertainen algoritmi on seuraavanlainen
(mukailtu edellämainitussa Riku Meskasen
<tt/&lt;mesrik@cc.jyu.fi&gt;/ kalenterikirjastossa olevan toteutuksen
pohjalta):

<enum>

<item>Laske, montako päivää on kulunut vuoden alusta (jos annettu
päivä on tammikuun ensimmäinen, vastaus on 0). Jaa vastaus seitsemällä
ja ota osamäärästä huomioon vain kokonaiset; tämä on ensimmäinen
arvaus viikkonumerkoksi.

<item>Jos vuosi on alkanut maanantaina, tiistaina, keskiviikkona tai
torstaina, lisää arvaukseen yksi.

<item>Jos arvaus on näin positiivinen, se kelpaa viikkonumeroksi;
mutta jos arvaus on nolla, niin:

  <itemize>

  <item>Jos edellinen vuosi on alkanut torstaina, tai se on ollut
  karkausvuosi ja alkanut keskiviikkona, viikkonumero on
  todellisuudessa 53.

  <item>Muussa tapauksessa todellinen viikkonumero on 52.

  </itemize>

</enum>

Seuraavassa C-ohjelmanpätkässä oleva weekno()-funktio laskee annetulle
päivälle (d = päivä 1 - 31, m = kuukausi 1 .. 12 ja y = vuosi)
viikkonumeron. Se on Tapani Tarvaisen (<tt/tt@math.jyu.fi/)
käsialaa. 

<tscreen><code>
int julian(int d, int m, int y)
{
  int n1, n2;
  n1 = 12*y+m-3;
  n2 = n1/12;
  return (734*n1+15)/24-2*n2+n2/4-n2/100+n2/400+d+1721119;
}

int weekno(int d, int m, int y)
{
  int n1, n2, w;
  n1 = julian(d, m, y);
  n2 = 7*(n1/7)+10;
  y = y+1;
  while ((w = (n2-julian(1,1,y))/7) <= 0) {
    y = y-1;
  }
  return w;
}
</code></tscreen>


Monet ohjelmointivälineet ja käyttöjärjestelmät tarjoavat välineitä
viikkonumeron laskemiseen. Ohjelmoijan on oltava kuitenkin tarkkana
siitä, että hän käyttää työkaluja, jotka laskevat oikean maan
viikkonumeroita &ndash; oikein. :-)

<sect>Muuta luettavaa
<p>
Tämän artikkelin sisälmys on tarkoituksella rajattu ahtaasti, sillä
maailmalla on runsaasti hyvää &ndash; ja toki myös asiantuntematonta
&ndash; materiaalia, joka vastaa useimpiin kysymyksiin.  Tässä
annetaan vihjeitä hyviksi aloituspaikoiksi.  Lisää - itse asiassa
aivan liikaa - vastauksia ohjemoinnista usein esitettyihin kysymyksiin
löytyy <url name="FAQ-arkistosta" url="http://www.faqs.org/faqs/">.
Katsele erityisesti <tt/comp/-hierarkian FAQeja.

<sect1>Kirjallisuutta
<p>
Vesa Lappalainen on koonnut <url name="seittisivulleen"
url="http://wekotin.math.jyu.fi/~vesal/kurssit/kirjallisuutta.html">
arvioita ohjelmointiin yleensä ja erityisesti graafisiin
käyttöliittymiin, olio-ohjelmointiin, C++-kieleen ja Delphiin
liittyvistä kirjoista.

<sect1>Ohjelmointikielet
<p>
Tärkein verkosta saatavissaa oleva C-ohjelmointikieleen liittyvä
kirjoitus on <url name="C-FAQ"
url="http://www.eskimo.com/~scs/C-faq/top.html">.  Jukka Korpela on
myös koonnut <url name="hyödyllistä tietoa"
url="http://www.hut.fi/u/jkorpela/Cinfo.html"> C-kielestä.

Bjarne Stroustrupin kehittämään C++-kieleen liittyvää materiaalia
löytyy kasapäin keksijän itsensä kokoaman <url name="seittisivun"
url="http://www.research.att.com/~bs/C++.html"> kautta.  Erityisesti
mainittakoon <url name="C++-FAQ"
url="http://www.utu.fi/~sisasa/oasis/cppfaq/">.

Java-kielestä on olemassa <url name="FAQ-lista"
url="http://www.afu.com/javafaq.html">.  Muutakin Java-materiaalia on
<url name="seitissä" url="http://www.afu.com/">.

Pascal-kielen Borland-murteisiin (poislukien Delphi) liittyviä
tekstejä löytyy <url name="mini-FAQ:n"
url="http://www.faqs.org/faqs/pascal/borland-minifaq/"> kauttta.

Perl-materiaalia on <url name="The Perl Instituten seittisivulla"
url="http://www.perl.org">.  Lisäksi on saatavilla
<url name="Perl-FAQ" url="http://www.faqs.org/faqs/perl-faq/part0/">.

Python-kielen <url name="seittisivusto" url="http://www.python.org/">
on olemassa.

<url name="Visual Basic FAQ"
url="http://home.sol.no/~jansh/vb/default.htm"> on.

Lisp-kielestäkin on <url name="FAQ-lista"
url="http://www.cs.cmu.edu/Groups/AI/html/faqs/lang/lisp/top.html">,
ja Schemellä on <url url="http://www.niksula.cs.hut.fi/~candolin/scheme/"
name="Suomessa fanisivut">, jossa on erinomainen linkkilista.

Jukka Korpela on koonnut <url name="linkkejä"
url="http://www.hut.fi/u/jkorpela/fortran.html">
Fortran-kielimateriaaliin.

<sect1>Käyttöjärjestelmät
<p>
Microsoftin käyttöjärjestelmistä tietoa löytyy kasapäin ympäri
verkkoa.  Parhaan tuloksen saa etsimällä kysymykseensä vastausta
suosikkihakurobotillaan ja lisäksi <url name="DejaNewsin
keskusteluarkistoista" url="http://www.dejanews.com/">.
MS-DOS-ohjelmoinnin kysymyksiin vastaillaan <url name="FAQ-listassa"
url="http://www.faqs.org/faqs/msdos-programmer-faq/part1/preamble.html">.
Windows-ohjelmointiin sopivaa lähtökohtapaikkaa en tiedä.

Macintosh-ohjelmoinnista on <url name="FAQ-lista"
url="http://www.faqs.org/faqs/macintosh/programming-faq/">.

Unix-ohjelmoinnistakin on <url name="FAQ-lista"
url="http://www.erlenstar.demon.co.uk/unix/faq_toc.html">

<sect>Kommentteja?
<p>
Kommentteja, korjauksia, lisäyksiä ja muuta sellaista otetaan vastaan
osoitteessa <htmlurl url="mailto:gaia@iki.fi" name="gaia@iki.fi">.

<sect>Kiitokset
<p>
Seuraavat ihmiset ovat auttaneet minua tämän kirjoitelman kokoamisessa
palautteellaan, kokemuksellaan, tiedoillaan ja ehdotuksillaan.  Suuri
kiitos heille kaikille.

<itemize>
<item>Jonne Itkonen, <tt/ji@math.jyu.fi/
<item>Jukka Korpela, <tt/Jukka.Korpela@hut.fi/
<item>Jukka Lahtinen, <tt/walker@clinet.fi/
<item>Tero Lahtinen, <tt/l126033@cs.tut.fi/
<item>Sami J. Laine, <tt/no.spam.lane@iki.fi/
<item>Vesa Lappalainen, <tt/vesal@math.jyu.fi/
<item>Veli-Pekka Lehtosaari, <tt/vplehto@technopark.fi/
<item>Tor Lillqvist, <tt/tml@iki.fi/
<item>Riku Meskanen, <tt/mesrik@cc.jyu.fi/
<item>Kimmo Pyykkö, <tt/kimmo@cc.hut.fi/
<item>Juha-Heikki Ruismäki, <tt/jr87641@cs.tut.fi/
<item>Rauli Ruohonen, <tt/raulir@iki.fi/
<item>Kimmo Surakka, <tt/kusti@cs.tut.fi/
<item>Tapani Tarvainen, <tt/tt@math.jyu.fi/
<item>Teppo Vuori
<item>Lars Wirzenius, <tt/liw@iki.fi/
</itemize>


</article>

